<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WCAG Auditor</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <!-- ========================================
           VIEW 1: AUDITORIA (tela principal)
           ======================================== -->
      <div id="audit-view" class="view">
        <header>
          <!-- üé® Seletor de Tema -->
          <div class="theme-switcher">
            <div class="theme-selector">
              <button
                class="theme-current"
                aria-label="Trocar tema"
                title="Trocar tema"
              ></button>
              <div class="theme-options">
                <button class="theme-option" data-theme="pink">
                  <div class="theme-color" data-theme="pink"></div>
                  <span class="theme-label"></span>
                </button>
                <button class="theme-option" data-theme="green">
                  <div class="theme-color" data-theme="green"></div>
                  <span class="theme-label"></span>
                </button>
                <button class="theme-option" data-theme="orange">
                  <div class="theme-color" data-theme="orange"></div>
                  <span class="theme-label"></span>
                </button>
                <button class="theme-option" data-theme="blue">
                  <div class="theme-color" data-theme="blue"></div>
                  <span class="theme-label"></span>
                </button>
              </div>
            </div>
          </div>

          <h1>WCAG Auditor</h1>
          <p class="subtitle">Auditoria de Acessibilidade Web</p>
        </header>

        <main>
          <section class="actions">
            <button id="run-audit" class="btn btn-action">
              <span class="icon">üîÑ</span>
              Auditar
            </button>
            <button id="highlight-toggle" class="btn btn-action" disabled>
              <span class="icon">üéØ</span>
              <span id="highlight-text">Destacar</span>
            </button>
            <button id="open-options" class="btn btn-action">
              <span class="icon">‚öôÔ∏è</span>
              Config
            </button>
          </section>

          <section id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Auditando p√°gina...</p>
          </section>

          <section id="results" class="results hidden">
            <!-- KPIs por n√≠vel WCAG -->
            <div class="summary">
              <h2>Resumo da Auditoria</h2>
              <div class="wcag-levels">
                <div class="wcag-level">
                  <div class="wcag-level-header">
                    <span class="wcag-badge level-a">A</span>
                    <span class="wcag-level-label">Essencial</span>
                  </div>
                  <div class="wcag-level-stats">
                    <span class="level-errors" id="level-a-errors">0</span>
                    erros ¬∑
                    <span class="level-warnings" id="level-a-warnings">0</span>
                    alertas
                  </div>
                </div>
                <div class="wcag-level">
                  <div class="wcag-level-header">
                    <span class="wcag-badge level-aa">AA</span>
                    <span class="wcag-level-label">Recomendado</span>
                  </div>
                  <div class="wcag-level-stats">
                    <span class="level-errors" id="level-aa-errors">0</span>
                    erros ¬∑
                    <span class="level-warnings" id="level-aa-warnings">0</span>
                    alertas
                  </div>
                </div>
                <div class="wcag-level">
                  <div class="wcag-level-header">
                    <span class="wcag-badge level-aaa">AAA</span>
                    <span class="wcag-level-label">Avan√ßado</span>
                  </div>
                  <div class="wcag-level-stats">
                    <span class="level-errors" id="level-aaa-errors">0</span>
                    erros ¬∑
                    <span class="level-warnings" id="level-aaa-warnings"
                      >0</span
                    >
                    alertas
                  </div>
                </div>
              </div>
            </div>

            <!-- üÜï Bot√µes de Exporta√ß√£o -->
            <div class="export-section">
              <h3 class="export-title">üìä Exportar Relat√≥rio</h3>
              <div class="export-buttons">
                <button
                  id="export-json"
                  class="btn btn-export"
                  disabled
                  title="Exportar como JSON"
                >
                  <span class="icon">üìÑ</span>
                  JSON
                </button>
                <button
                  id="export-csv"
                  class="btn btn-export"
                  disabled
                  title="Exportar como CSV (Excel)"
                >
                  <span class="icon">üìä</span>
                  CSV
                </button>
              </div>
            </div>

            <!-- Filtros -->
            <div class="filters">
              <div class="filter-group">
                <label class="filter-label">Filtrar por n√≠vel:</label>
                <div class="filter-chips">
                  <button class="filter-chip active" data-level="A">A</button>
                  <button class="filter-chip active" data-level="AA">AA</button>
                  <button class="filter-chip active" data-level="AAA">
                    AAA
                  </button>
                </div>
              </div>
              <div class="filter-group">
                <label class="filter-label" for="rule-filter"
                  >Filtrar por regra:</label
                >
                <select id="rule-filter" class="filter-select">
                  <option value="all">Todas as regras</option>
                </select>
              </div>
            </div>

            <!-- Lista de viola√ß√µes -->
            <div id="violations-list" class="violations-list"></div>

            <div id="no-violations" class="no-violations hidden">
              <span class="icon">‚úÖ</span>
              <p>Nenhuma viola√ß√£o encontrada!</p>
              <p class="note">
                A p√°gina passou em todas as verifica√ß√µes implementadas.
              </p>
            </div>

            <div id="no-results-filter" class="no-violations hidden">
              <span class="icon">üîç</span>
              <p>Nenhum resultado com os filtros aplicados</p>
              <p class="note">Tente ajustar os filtros acima.</p>
            </div>
          </section>
        </main>

        <footer>
          <p class="version">v1.0.0</p>
        </footer>
      </div>

      <!-- ========================================
           VIEW 2: CONFIGURA√á√ïES
           ======================================== -->
      <div id="options-view" class="view hidden">
        <header>
          <div class="header-with-back">
            <button
              id="back-to-audit"
              class="btn-back"
              title="Voltar"
              aria-label="Voltar para auditoria"
            >
              <span class="back-icon">‚Üê</span>
            </button>
            <div class="header-content">
              <h1>‚öôÔ∏è Configura√ß√µes</h1>
              <p class="subtitle">Personalize a auditoria</p>
            </div>
          </div>
        </header>

        <main class="options-content">
          <!-- N√≠vel WCAG alvo -->
          <section class="config-section">
            <h2>üéØ N√≠vel Alvo WCAG</h2>
            <p class="section-description">
              Escolha o n√≠vel de conformidade desejado
            </p>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="target-level" value="A" />
                <div class="radio-content">
                  <strong>A - Essencial</strong>
                  <span>Conformidade m√≠nima (obrigat√≥ria)</span>
                </div>
              </label>
              <label class="radio-option">
                <input type="radio" name="target-level" value="AA" checked />
                <div class="radio-content">
                  <strong>AA - Recomendado</strong>
                  <span>Padr√£o da maioria dos sites</span>
                </div>
              </label>
              <label class="radio-option">
                <input type="radio" name="target-level" value="AAA" />
                <div class="radio-content">
                  <strong>AAA - Avan√ßado</strong>
                  <span>Conformidade m√°xima</span>
                </div>
              </label>
            </div>
          </section>

          <!-- Regras ativas -->
          <section class="config-section">
            <div class="section-header">
              <h2>üìã Regras de Auditoria</h2>
              <p class="section-description">
                Ative/desative regras espec√≠ficas
              </p>
            </div>

            <div class="rules-controls">
              <button id="enable-all" class="btn btn-small">
                ‚úì Ativar Todas
              </button>
              <button id="disable-all" class="btn btn-small">
                ‚úó Desativar Todas
              </button>
            </div>

            <div id="rules-list" class="rules-list">
              <!-- Regras ser√£o carregadas dinamicamente -->
            </div>
          </section>

          <!-- Bot√£o de resetar -->
          <div class="options-actions">
            <button id="reset-options" class="btn btn-secondary btn-reset">
              üîÑ Restaurar Padr√£o
            </button>
          </div>
        </main>

        <footer class="options-footer">
          <button id="save-options" class="btn btn-primary btn-save-fixed">
            üíæ Salvar
          </button>
        </footer>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden">
      <span class="toast-icon">‚úì</span>
      <span class="toast-message">Copiado!</span>
    </div>

    <script type="module" src="../core/messaging.js"></script>
    <script type="module" src="popup.js"></script>
  </body>
</html>
